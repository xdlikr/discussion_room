# 使用指南

## 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 配置API密钥

复制 `env.example` 为 `.env`：

```bash
cp env.example .env
```

编辑 `.env` 文件，填入你的 SILICONFLOW API 密钥：

```
SILICONFLOW_API_KEY=your_actual_api_key_here
```

### 3. 启动服务

**方法1：使用启动脚本**

```bash
# Linux/Mac
chmod +x start.sh
./start.sh

# Windows
start.bat
```

**方法2：手动启动**

```bash
cd backend
python main.py
```

### 4. 访问应用

在浏览器中打开：http://localhost:8000

## 使用流程

### 第一步：创建AI分析师

1. 点击左侧边栏的 "+" 按钮
2. 填写分析师信息：
   - **名称**：例如"价值投资者"
   - **角色描述**：例如"专注于长期价值投资"
   - **系统提示词**：定义分析师的专业背景和风格

**示例分析师配置：**

**价值投资分析师**
```
名称：巴菲特
角色：价值投资专家
提示词：你是一位经验丰富的价值投资分析师，受沃伦·巴菲特投资理念的启发。你擅长从基本面角度分析投资机会，注重企业的内在价值、护城河、管理层能力和长期增长潜力。请用专业但易懂的语言提供你的投资观点。
```

**技术分析师**
```
名称：技术派
角色：技术分析专家
提示词：你是一位专业的技术分析师，擅长使用图表、指标和价格行为来分析市场趋势。你关注支撑位、阻力位、成交量、动量指标等技术信号。请从技术面角度提供你的分析。
```

**风险评估师**
```
名称：风控专家
角色：风险管理专家
提示词：你是一位风险管理专家，擅长识别和评估投资风险。你关注市场风险、信用风险、流动性风险、政策风险等各个维度。请从风险控制的角度提供你的专业意见。
```

### 第二步：开始讨论

1. 在底部输入框输入你的投资话题，例如：
   - "分析特斯拉当前的投资价值"
   - "比特币近期走势如何？"
   - "医药行业的投资机会"

2. 点击"开始讨论"按钮

3. 所有AI分析师会依次发表观点

### 第三步：深入讨论

1. 阅读各位分析师的观点
2. 在输入框继续提问，例如：
   - "如果经济衰退，会有什么影响？"
   - "有哪些风险需要注意？"
   - "你们对估值有什么看法？"

3. 分析师们会基于之前的讨论继续回答

### 第四步：生成总结

1. 讨论完成后，点击"生成总结"按钮
2. AI会自动提取关键观点、共识和分歧
3. 总结会保存在讨论历史中

## 功能说明

### Agent管理
- **添加Agent**：定义新的AI分析师
- **编辑Agent**：修改分析师的提示词和角色
- **删除Agent**：移除不需要的分析师

### 讨论管理
- **新讨论**：开始新的讨论话题
- **历史记录**：查看之前的讨论
- **多轮对话**：支持连续提问
- **智能总结**：自动生成讨论要点

### 界面特性
- **流式响应**：实时显示AI回复（打字机效果）
- **北欧设计**：简洁、现代、高效的界面
- **响应式布局**：适配不同屏幕尺寸

## API文档

FastAPI自动生成了交互式API文档：

- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## 数据存储

所有数据存储在本地SQLite数据库中：
- 数据库文件：`opinionroom.db`
- 位置：项目根目录

## 故障排除

### 1. 模块未找到错误

```bash
pip install -r requirements.txt
```

### 2. API密钥错误

检查 `.env` 文件中的 `SILICONFLOW_API_KEY` 是否正确

### 3. 端口被占用

修改 `backend/main.py` 中的端口号（默认8000）

### 4. 数据库错误

删除 `opinionroom.db` 文件，重新启动服务自动重建

## 提示和技巧

1. **多样化分析师**：创建不同专业领域和风格的分析师，获得更全面的观点
2. **清晰的提示词**：越详细的系统提示词，AI的回复越专业
3. **具体的话题**：提出具体的投资话题，而不是太宽泛的问题
4. **持续追问**：通过多轮对话深入探讨细节
5. **定期总结**：使用总结功能提取关键信息

## 技术栈

- **后端**：Python 3.8+, FastAPI, SQLAlchemy, SQLite
- **前端**：原生 HTML/CSS/JavaScript
- **AI API**：SILICONFLOW (Qwen2.5-7B-Instruct)

## 许可证

MIT License

